<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Echo-ä½ ä¹Ÿæœ‰æƒ³è¯´çš„ä¸€å¥è¯å—</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
</head>
<style>
    @font-face {
        font-family: Zpix;
        src: url(echo.woff2);
    }

    * {
        font-family: Zpix, sans-serif !important;
    }

    body {
        background-image: url("assets/img/bj.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-attachment: fixed;
        background-size: cover;
        width: 92%;
        height: 100%;
        align-items: center;
        margin: auto;
        text-align: center;
    }

    .echo_text {
        color: white;
        font-size: 18px;
        /*noinspection CssInvalidFunction*/
        background-color: rgb(0, 0, 0, 0.6);
        border-radius: 30px;
        padding: 18px
    }

    .footer {
        margin-bottom: 20px;
        /*noinspection CssInvalidFunction*/
        background-color: rgb(243, 35, 35, 0.6);
        border-radius: 30px;
    }

    @keyframes animate {
        0%, 100% {
            text-shadow: 0 0 0 #0ff, 2px 2px 0 #f00;
        }
        75% {
            text-shadow: 1px 1px 0 #0ff, -1px -1px 0 #f00;
        }
    }
</style>
<body id="main" class="container">
<nav class="navbar navbar-light bg-light" style="border-radius: 10px;opacity: 0.8;margin-top: 20px">
    <div id="update" onclick="update()" style="color:#9c27b0;font-size: 18px;cursor: pointer">æ¥ä¸€å¥</div>
    <div class="button">
        <!--
        <a class="btn btn-outline-danger" href="admin/login.html">ğŸŒ•</a>
        -->
        <a class="btn btn-outline-success" href="api.html">API</a>
        <a class="btn btn-outline-danger" href="submit.html">æŠ•ç¨¿</a>
        <a class="btn btn-outline-dark" target="_blank" href="https://github.com/Drizzle365/echo">Code</a>
    </div>
</nav>
<div id="echo_box" style="min-height: 110px">
    <p id="echo" class="echo_text" style="animation: animate 1s linear infinite;cursor: pointer" data-toggle="modal"
       data-target="#see">
        æ­£åœ¨è·å–æ•°æ®
    </p>
</div>
<div id="footer_box" class="footer">
    <a style="color: white;font-size: 15px">Copyright Â© 2021 Drizzle. All Rights
        Reserved.</a>
</div>
</body>
<!-- å¥å­è¯¦æƒ…æ¨¡æ€æ¡† -->
<div class="modal fade" id="see" style="display: none">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- æ¨¡æ€æ¡†å¤´éƒ¨ -->
            <div class="modal-header">
                <h4 class="modal-title">å¥å­è¯¦æƒ…ï¼š</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- æ¨¡æ€æ¡†ä¸»ä½“ -->
            <div class="modal-body" id="see_box">
                <p id="see_content"></p>
                <p id="see_like"></p>
                <p id="see_from"></p>
            </div>

            <!-- æ¨¡æ€æ¡†åº•éƒ¨ -->
            <div class="modal-footer">
                <div class="form-group" id="communicate_box" style="display: none">
                    <label for="communicate" style="float: left;margin-top: 6px"></label>
                    <input type="text" class="form-control" id="communicate" style="width: 200px;">
                </div>
                <button type="button" class="btn btn-secondary" id="like" data-dismiss="modal" onclick="like()">
                    ğŸ’• å–œçˆ± + 1
                </button>
                <button type="button" class="btn btn-secondary" id="communicate_button" onclick="communicate()">ğŸª è¯„è®º
                </button>
            </div>

        </div>
    </div>
</div>
</html>
<script>
    function start() {
        const echo_box = document.getElementById('echo_box')
        const Height = document.documentElement.clientHeight
        const Height_echo = echo_box.offsetHeight
        echo_box.style.marginTop = (Height - Height_echo) / 3 + "px"
        const footer_box = document.getElementById('footer_box')
        const Height_footer = footer_box.offsetHeight
        footer_box.style.marginTop = (Height - Height_footer - 420) + "px"
    }

    function update() {
        $('#communicate_box').css('display', 'none')
        $('#like').css('display', 'block')
        $('#communicate_button').html('ğŸª è¯„è®º');
        $('#communicate').val('')
        $('#update').html('æ­£åœ¨è·å–');
        $.get("model/api.php", function (data, status) {
            setTimeout(function () {
                data = $.parseJSON(data);
                if (status === 'success') {
                    $('#echo').html(data['content']);
                    $('#see_content').html(data['content']);
                    $('#see_like').html('ğŸ’• å–œçˆ±: ' + data['likes']);
                    if (data['from_who'] === 'None')
                        data['from_who'] = '';
                    if (data['from_where'] === 'None')
                        data['from_where'] = ''
                    else
                        data['from_where'] = ' ã€Š' + data['from_where'] + 'ã€‹ ';
                    $('#see_from').html('ğŸ» æ¥è‡ª: ' + data['from_who'] + data['from_where']);
                } else
                    alert("ç½‘ç»œé”™è¯¯")
                $('#update').html('æ¥ä¸€å¥ğŸ’¨');
            }, 100)
        });
    }

    function communicate() {
        if ($('#communicate_button').text() === "ğŸª è¯„è®º") {
            communicate_start();
        } else {
            communicate_submit();
        }
    }

    function communicate_start() {
        document.getElementById('communicate_box').style.display = 'block'
        document.getElementById('like').style.display = 'none';
        document.getElementById('communicate').focus();
        document.getElementById('communicate_button').innerHTML = 'ğŸª å‘è¡¨';
    }

    function communicate_submit() {

    }

    function like() {

    }

    window.onresize = function () {
        start()
    }
    start()
    update();
</script>
