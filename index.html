<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Echo</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
</head>
<style>
    body {
        background-image: url("assets/img/bj.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-attachment: fixed;
        background-size: cover;
        width: 92%;
        height: 100%;
        align-items: center;
        margin: auto;
        text-align: center;
    }

    .echo_text {
        color: white;
        font-size: 25px;
        /*noinspection CssInvalidFunction*/
        background-color: rgb(0, 0, 0, 0.6);
        border-radius: 30px;
        padding: 18px
    }

    .footer {
        margin-bottom: 20px;
        /*noinspection CssInvalidFunction*/
        background-color: rgb(243, 35, 35, 0.6);
        border-radius: 30px;
    }
</style>
<body class="container">
<nav class="navbar navbar-light bg-light" style="border-radius: 10px;opacity: 0.8;margin-top: 20px">
    <div id="update" onclick="update()" style="color:#9c27b0;font-size: 18px;cursor: pointer">Echo · 点我</div>
    <div class="button">
        <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#login">API</button>
        <button type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#register">投稿</button>
        <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#register">Github</button>
    </div>
</nav>
<div id="echo_box" style="min-height: 110px">
    <p id="echo" class="echo_text">正在获取数据</p>
</div>

<div id="footer_box" class="footer">
    <a style="color: white">Copyright © 2021 Drizzle. All Rights Reserved.</a>
</div>
</body>
<script>
    const echo_box = document.getElementById('echo_box')
    const Height = document.documentElement.clientHeight
    const Height_echo = echo_box.offsetHeight
    echo_box.style.marginTop = (Height - Height_echo) / 3 + "px"
    const footer_box = document.getElementById('footer_box')
    const Height_footer = footer_box.offsetHeight
    footer_box.style.marginTop = (Height - Height_footer - 420) + "px"

    function update() {
        $.get("model/api.php", function (data, status) {
            document.getElementById('update').innerHTML = '正在获取';
            setTimeout(function () {
                data = $.parseJSON(data);
                if (status === 'success')
                    document.getElementById('echo').innerHTML = data['content']
                else
                    alert("网络错误")
                document.getElementById('update').innerHTML = 'Echo · 点我';
            }, 300)
        });
    }

    update();
</script>
</html>
